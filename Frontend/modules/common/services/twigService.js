'use strict';var _ = require('underscore'),    $ = require('jquery'),    markdown = require('markdown'),    Twig = require('twig'),    twig = Twig.twig;//---Functions---//Twig.extendFunction("path", function(value, params) {    return _.pathForTwig(value,params);});Twig.extendFunction("asset", function(value) {    return value;});//---Filters---//Twig.extendFilter("md2html", function(value) {    return markdown.markdown.toHTML(value);    return value;});Twig.extendFilter("raw", function(value) {    return value;});Twig.extendFilter("trans", function(value) {    var trans = conf.trans[value];    if(trans == undefined && value){        console.log('FALTA TRADUCCIONS EN JAVASCRIPT: ' + value + ' ' + trans);        return value;    }    return trans;});Twig.extendFilter("getObject", function(object) {    console.log("FALTA FILTRO GETOBJECT",object)    return object;});Twig.extendFilter("extend", function(value, params) {    var response;    if (_.isUndefined(value)) {        response = _.first(params);    } else {        response = _.extend(_.first(params), value);    }    removeObjects(response);    return response;});Twig.extendFilter("process", function(value, params) {    return _.mapObject(value, function (val) {        return params[0][val];    });});var removeObjects = function(data) {    delete data._keys;    delete data.__proto__;    _.each(data, function(val) {        if (_.isObject(val) || _.isArray(val)) removeObjects(val);    });    return data;}module.exports = /*@ngInject*/    function twigService( /* inject dependencies here, i.e. : $rootScope */ ) {        //utilities        /*twig({            id: 'FrontendBundle:Macros:utilities.html.twig',            data: require('../../../../src/FrontendBundle/Resources/views/Macros/utilities.html.twig')        });*/        return {            render: function(template, data) {                data = _.isUndefined(data) ? {} : data;                data.app = {                    request:                    {                        locale: conf.lang                    }                };                var temp = twig({                    allowInlineIncludes: true,                    data: template                });                return temp.render(data);            }        };    };