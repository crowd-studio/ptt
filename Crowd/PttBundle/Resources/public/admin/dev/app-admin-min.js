define(["jquery","globals","Backbone","underscore","mustache","text!templates/upload-file-modal.mustache","moment","aws","bootstrap","markdown","to-markdown","bootstrap-markdown","asmselect","bootstrap-datepicker","bootstrap-datepicker-es","bootstrap-colorpicker","select2","select2-es","sortable","backboneView","dropzone","Selectize","Evaporate"],function($,e,t,i,n,a,l){function s(e,t,i){return i.replace(new RegExp(e,"g"),t)}function s(e,t,i){return i.replace(new RegExp(e,"g"),t)}window.app={baseUrl:"/app_dev.php/",initialize:function(){var e=this;$.each($('textarea[data-type="markdown"]'),function(e){var t=new o({el:$(this)})}),i.each($("a"),function(e){$(e).bind("click",function(t){"_blank"!=$(e).attr("target")&&"undefined"!=typeof $(e).attr("href")&&"#"!=$(e).attr("href")&&$(e).attr("href").indexOf("language-")==-1&&$(e).attr("href").indexOf("export-csv")==-1&&i.isUndefined($(e).attr("download"))&&$(".loader").addClass("visible")})}),$("div.alert:not(.persist)").delay(3e3).fadeOut(200),$("select[multiple]").asmSelect(),$(window).bind("resize",i.bind(this.resize,this)),$(".mobile-nav a").click(function(t){t.preventDefault(),e.toggleSidebar()}),$(".select-search").each(function(){var e=$(this).attr("data-model").toLowerCase(),t=$(this).attr("value"),i=$(this).attr("data-title"),n=$(this),a=n.selectize({valueField:"id",labelField:"title",searchField:"title",options:[],create:!1,render:{option:function(e,t){return'<div><span class="title"><span class="name">'+t(e.title)+'</span></span><span class="id hidden">'+e.id+"</span></div>"}},load:function(t,i){return t.length?void $.ajax({url:window.app.baseUrl+"admin/"+e+"/search",type:"GET",dataType:"json",data:{q:t,page_limit:30},success:function(e){i(e)},error:function(){i()}}):i()}});""!=t&&parseInt(t)>-1&&(n.parent().find("input").val(i),$(a[0]).find("option").val(t))}),$("a.list-copy").each(function(){var e=new d({el:$(this)})}),$('[data-fieldtype="entity"]').each(function(){var e=new r({el:$(this)})}),$('[data-fieldtype="multipleEntity"]').each(function(){var e=new r({el:$(this)})}),$.each($('[data-fieldtype="gallery"]'),function(e){var t=new r({el:$(this)}),i=new Dropzone(".dropzone",{acceptedFiles:"image/*",url:this.getAttribute("data-prefix")+window.app.baseUrl+"admin_panel/ptt/media/upload/",success:function(e,i){if(t.add_gallery(i.file,i.path),e.previewElement)return e.previewElement.classList.add("dz-success")}})}),$('[data-fieldtype="instagram"]').each(function(){var e=new D({el:$(this)})}),$('[data-fieldtype="twitter"]').each(function(){var e=new S({el:$(this)})}),$("div.preview").each(function(){var e=new h({el:$(this)})}),$('div[data-fieldtype="map"] .map').each(function(){var e=new f({el:$(this)})}),$('div[data-fieldtype="panel"]').each(function(){var e=new p({el:$(this)})}),$(".btn-alert-button").click(function(e){e.preventDefault(),confirm($(this).attr("data-alert"))&&(window.location=$(this).attr("href"))}),$("div.camera").each(function(){var e=new u({el:$(this)})}),$("form.edit").submit(function(e){if($(this).hasClass("processing"))return!1}),$("form.disabled").each(function(){$(this).find("input,select,textarea,.btn:not(.btn-link)").addClass("disabled").attr("disabled","disabled")}),$("form input.datepicker").each(function(){$(this).datepicker({format:"dd/mm/yyyy",language:$(this).attr("data-language"),autoclose:!0})}),$("form .colorPicker").each(function(){$(this).colorpicker()}),$("form .autocomplete-input").each(function(){var e=JSON.parse($(this).attr("field")),t=$(this).val();$(this).select2({ajax:{url:window.app.baseUrl+"admin_panel/ptt/media/autocomplete/",dataType:"json",type:"POST",delay:250,data:function(t){return{field:e,query:t,type:"search"}},processResults:function(e){return e.results},cache:!0},minimumInputLength:3,templateResult:function(e){return"<div>"+e.text+"</div>"},templateSelection:function(e){return"<div>"+e.text+"</div>"},initSelection:function(i,n){t!=-1&&""!=t&&$.ajax({url:window.app.baseUrl+"admin_panel/ptt/media/autocomplete/",dataType:"json",type:"POST",data:{type:"init",id:t,field:e},success:function(e){n(e)}})}}).select2("val",[]).change(function(e){$(this).val(e.val)})}),$("div.sortable-list").each(function(){var e=new b({el:$(this),alert:!0})}),$("ul.sortable").each(function(){var e=new w({el:$(this),alert:!0})}),$("ul.multi-sortable").each(function(){var e=new w({el:$(this),alert:!1})}),$(".upload-file-container").each(function(){var e=new v({el:$(this)})}),$.each($("ul.table .btn-group a.list-eliminar"),function(e){var t=new k({el:$(this)})}),$.each($("li.subSections"),function(e){var t=new y({el:$(this)})}),$.each($(".select-multiple"),function(e){var t=new C({el:$(this)})}),$.each($(".nav-tabs"),function(e){var t=new x({el:$(this)})}),$.each($("[slave]"),function(e){var t=new z({el:$(this)})}),$.each($(".multipart-upload"),function(e){var t=new V({el:$(this)})})},resize:function(){this.showSidebar(!1)},toggleSidebar:function(){this.showSidebar($(".sidebar").hasClass("hidden-xs"))},showSidebar:function(e){e?($(".sidebar").removeClass("hidden-xs"),$(".main").addClass("hidden-xs"),$("body").addClass("nav-active")):($(".sidebar").addClass("hidden-xs"),$(".main").removeClass("hidden-xs"),$("body").removeClass("nav-active"))}};var d=t.View.extend({events:{click:"copy"},copy:function(e){var t=this.$el[0].attributes["data-id"].value,i=$(".modal-body #id");i[0].value=t}}),o=t.View.extend({events:{},initialize:function(e){"undefined"==typeof e&&(e={}),i.extend(this,i.pick(e));var t=i.isUndefined(this.$el.attr("data-height"))?300:this.$el.attr("data-height"),n=this;this.$el.markdown({autofocus:!1,savable:!1,height:t,fullscreen:{enable:!1},additionalButtons:[[{name:"groupCustom",data:[{name:"cmdUploadImage",toggle:!1,title:"Upload file",icon:"glyphicon glyphicon-upload",callback:function(e){n.callback(e)}}]}]]})},callback:function(e){var t=n.to_html(a,{});$("body").append($(t).attr("id","modal-upload-file")),$("#modal-upload-file").modal("show"),$("#modal-upload-file div.btn-group div").click(function(){$("#modal-upload-file div.btn-group div.active").removeClass("active"),$(this).addClass("active")}),$("#modal-upload-file").on("hidden.bs.modal",function(){$("#modal-upload-file").remove()}),$("#modal-upload-file form").submit(function(t){var i=this;t.preventDefault();var n=$(this).find("#file")[0].files;if(n.length>0){$(this).addClass("loading");for(var a=new FormData,l=0;l<n.length;l++){var s=n[l];s.type.match("image.*")&&a.append("files[]",s,s.name)}var d=$("#modal-upload-file div.btn-group div.active"),o=d.attr("data-width"),r=d.attr("data-height");a.append("width",o),a.append("height",r);var c=new XMLHttpRequest;c.open("POST",window.app.baseUrl+$(i).attr("action"),!0),c.onload=function(t){if(200===c.status){var t=JSON.parse(t.target.response),n="!["+$(i).find("#description").val()+"]("+t.resized+")";e.replaceSelection(n),e.setSelection(e.getSelection(),e.getSelection()+n.length),$("#modal-upload-file").modal("hide")}else $(i).removeClass("loading"),alert("An error occurred! Please, try again!")},c.send(a)}else alert("You must select a file!")})}}),r=t.View.extend({events:{"click .btn.add":"add","click .btn.add-multi":"add_multi","click .btn.btn-collapse":"collapse","click .btn-sort":"sort"},initialize:function(){"undefined"==typeof options&&(options={}),i.extend(this,i.pick(options)),i.each(this.$el.find("li.entity"),function(e,t){var i=new c({index:t,el:e})})},add:function(e){e.preventDefault();var t=this.$el.find("li.entity").length+1,i=this.$el.find(".template").html(),n=new c({index:t,template:i});this.$el.find(".multi-sortable").append(n.render().$el),n.initPlugins()},add_multi:function(e){e.preventDefault();var t=this.$el.find("select[data-selector] option:selected").val();if(t!=-1){var i=this.$el.find("li.entity").length+1,n=this.$el.find('.template[data-type="'+t+'"]').html(),a=new c({index:i,template:n});this.$el.find(".multi-sortable").append(a.render().$el),this.$el.find("select[data-selector]").val(-1),a.initPlugins()}},add_gallery:function(e,t){var i=this.$el.find("li.entity").length+1,n=this.$el.find(".template").html(),a=new c({index:i,template:n});this.$el.find(".multi-sortable").append(a.render().$el),a.gallery(e,t),a.initPlugins()},sort:function(e){var t=this.$el.find(".btn.btn-sort"),n=this.$el.find("#Project-moduleSelector"),a=this.$el.find(".btn.btn-collapse"),l=this.$el.find(".btn.add");t.toggleClass("btn-danger"),t.hasClass("btn-danger")?($("ul.multi-sortable").each(function(){var e=new w({el:$(this),alert:!1})}),$(n).prop("disabled",!0),$(l).prop("disabled",!0),a.removeClass("btn-danger"),a.text(a.attr("data-collapse")),t.text(t.attr("data-edit"))):($(n).prop("disabled",!1),$(l).prop("disabled",!1),t.text(t.attr("data-order"))),i.each(this.$el.find("li.entity"),function(e){var i=$(e).backboneView();t.hasClass("btn-danger")?($(e).attr("draggable","true"),i.startSort()):($(e).removeAttr("draggable"),i.stopSort())})},collapse:function(e){var t=this.$el.find(".btn.btn-collapse");t.toggleClass("btn-danger"),t.hasClass("btn-danger")?t.text(t.attr("data-expand")):t.text(t.attr("data-collapse")),i.each(this.$el.find("li.entity"),function(e){var i=$(e).backboneView();t.hasClass("btn-danger")?i.collapse():i.expand()})}}),c=t.View.extend({events:{"click .remove":"removeView","click .title-closed":"expand","click .title-open":"collapse","click .triangle-closed":"expand","click .triangle-open":"collapse"},tagName:"li",className:"entity",attributes:{"data-id":0},initialize:function(e){i.extend(this,e),this.model={index:this.index},this.attributes["data-id"]=this.index},render:function(){var e=n.render(this.template,this.model);return this.$el.html(e),this},removeView:function(e){e.preventDefault(),confirm("Proceed with deletion?")&&this.destroy()},destroy:function(){this.remove(),this.unbind()},startSort:function(){this.collapse(),this.$el.find(".triangle").removeClass("triangle-closed"),this.$el.find(".title").removeClass("title-closed"),this.$el.find(".handle").removeClass("hidden"),this.$el.find(".list-eliminar").addClass("hidden")},stopSort:function(){this.$el.find(".handle").addClass("hidden"),this.$el.find(".triangle").addClass("triangle-closed"),this.$el.find(".title").addClass("title-closed"),this.$el.find(".list-eliminar").removeClass("hidden")},expand:function(e){i.isUndefined(e)||e.preventDefault(),this.$el.find(".triangle").removeClass("triangle-closed"),this.$el.find(".triangle").addClass("triangle-open"),this.$el.find(".title").removeClass("title-closed"),this.$el.find(".title").addClass("title-open"),this.$el.find(".collapse-body").removeClass("hidden")},collapse:function(e){i.isUndefined(e)||e.preventDefault(),this.$el.find(".triangle").removeClass("triangle-open"),this.$el.find(".triangle").addClass("triangle-closed"),this.$el.find(".title").removeClass("title-open"),this.$el.find(".title").addClass("title-closed"),this.$el.find(".collapse-body").addClass("hidden")},gallery:function(e,t){this.$el.find(".gallery-input").val(t);var i=this.$el.find("img.preview-image"),n=this.$el.find(".image-container"),a=this.$el.find("a.fakeClick");i.attr("src",e),n.removeClass("hidden"),a.addClass("hidden")},initPlugins:function(){i.delay(function(){this.initMarkdown(),this.initPreview(),this.initLanguageTabs(),this.initSelectMultiple()}.bind(this),300)},initMarkdown:function(){this.$el.find('textarea[data-type="markdown"]').each(function(e){var t=new o({el:$(this)})})},initPreview:function(){this.$el.find("div.upload-file-container").each(function(){var e=new v({el:$(this)})})},initLanguageTabs:function(){this.$el.find(".nav-tabs").each(function(e){var t=new x({el:$(this)})})},initSelectMultiple:function(){this.$el.find("select[multiple]").each(function(e){$(this).asmSelect()})}}),h=t.View.extend({events:{"click .btn.remove-image":"remove"},initialize:function(){"undefined"==typeof options&&(options={}),i.extend(this,i.pick(options))},remove:function(e){if(e.preventDefault(),confirm("Proceed with file deletion?")){$(e.currentTarget).parent().fadeOut(300,function(){$(this).find('input[type="file"]').remove()});var t=$(e.currentTarget).parent().find('input[type="hidden"]').attr("data-id");$(e.currentTarget).parent().find('input[type="hidden"]').val(t),$(e.currentTarget).parent().parent().find(".upload-file-container ").removeClass("hidden")}}}),f=t.View.extend({events:{"click .search":"search","keydown .address":"addressSearch"},initialize:function(){"undefined"==typeof options&&(options={}),i.extend(this,i.pick(options)),this.initializeMap()},initializeMap:function(){this.geocoder=new google.maps.Geocoder;var e=new google.maps.LatLng(41.386999,2.170032),t=[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}],i={zoom:16,center:e,styles:t};this.map=new google.maps.Map(this.$el.find(".map-canvas")[0],i);var n=this;google.maps.event.addListener(this.map,"click",function(e){n.addPin(e.latLng,!1)}),this.addDefaultAddress()},addDefaultAddress:function(){if(this.$el.find("input.coordinates").val().length>0){var e=this.$el.find("input.coordinates").val().split("/");if(2==e.length){var t=new google.maps.LatLng(parseFloat(e[0]),parseFloat(e[1]));this.addPin(t,!0)}}},addressSearch:function(e){"undefined"!=typeof e.which&&13==e.which&&this.search(e)},search:function(e){e.preventDefault();var t=this;this.geocoder.geocode({address:this.$el.find(".address").val()},function(e,i){i==google.maps.GeocoderStatus.OK?t.addPin(e[0].geometry.location,!0):alert("There was an error: "+i)})},addPin:function(e,t){"undefined"!=typeof this.marker&&this.marker.setMap(null),this.marker=new google.maps.Marker({map:this.map,position:e});var i=e.lat()+"/"+e.lng();this.$el.find("input.coordinates").val(i),t&&this.map.setCenter(e)}}),u=t.View.extend({events:{"click a.showWebcam":"toggle","click a.snapPicture":"snap"},firstTime:!0,pictureTaken:!1,initialize:function(){"undefined"==typeof options&&(options={}),i.extend(this,i.pick(options))},toggle:function(e){e.preventDefault(),this.$el.find(".camera-preview").toggleClass("active"),this.$el.find(".camera-preview").hasClass("active")&&this.firstTime&&this.startCamera()},startCamera:function(){this.firstTime=!1;var e=this.$el.find("canvas")[0],t=e.getContext("2d"),i=this.$el.find("video")[0],n={video:!0},a=function(e){console.log("Video capture error: "+e.code)};this.video=i,this.canvas=e,this.context=t,navigator.getUserMedia?navigator.getUserMedia(n,function(e){i.src=e,i.play()},a):navigator.webkitGetUserMedia?navigator.webkitGetUserMedia(n,function(e){i.src=window.webkitURL.createObjectURL(e),i.play()},a):navigator.mozGetUserMedia&&navigator.mozGetUserMedia(n,function(e){i.src=window.URL.createObjectURL(e),i.play()},a)},snap:function(e){if(e.preventDefault(),this.$el.find("video").toggleClass("hidden"),this.$el.find("canvas").toggleClass("hidden"),!this.pictureTaken){this.context.drawImage(this.video,0,0,800,600);var t=this;$("form.edit").addClass("processing"),$.ajax({type:"POST",url:window.app.baseUrl+t.$el.attr("data-url"),data:{canvas:"yes",imgBase64:t.canvas.toDataURL(),sizes:JSON.parse(this.$el.attr("data-sizes"))}}).done(function(e){t.$el.find('input[type="hidden"]').val(e.filename),$("form.edit").removeClass("processing")})}this.pictureTaken=!this.pictureTaken}}),p=t.View.extend({events:{"click button.btn.btn-default":"selectDay"},initialize:function(){"undefined"==typeof options&&(options={}),i.extend(this,i.pick(options))},selectDay:function(e){e.preventDefault();var t=this.$el.find("div.btn-group button.btn").index(e.toElement);$(e.toElement).toggleClass("active");var n=this.$el.find('input[type="hidden"]').val().split("");i.isUndefined(n[t])||(n[t]="0"==n[t]?1:0),this.$el.find('input[type="hidden"]').val(n.join(""))}}),v=t.View.extend({events:{"click a.fakeClick":"fakeClick","change input.chooseFile":"preview","click a.remove-image":"delete"},initialize:function(e){i.extend(this,i.pick(e))},fakeClick:function(e){e.preventDefault(),this.$el.find("input.chooseFile").click()},preview:function(e){e.preventDefault();var t=this.$el.find("img.preview-image"),i=this.$el.find(".image-container"),n=this.$el.find("a.fakeClick"),a=e.target;if(a.files&&a.files[0]){var l=a.files[0],s="";if(i.hasClass("svg")&&"image/svg+xml"!=l.type?s="Must enter a .svg file":i.hasClass("img-input")&&l.type.indexOf("image")==-1&&(s="Must enter a image file"),""==s){var d=new FileReader;d.onload=function(e){return function(e){t.attr("src",e.target.result)}}(t),d.readAsDataURL(l),i.removeClass("hidden"),n.addClass("hidden")}else alert(s)}},delete:function(e){var t=this.$el.find(".image-container"),i=this.$el.find("input.chooseFile"),n=this.$el.find("a.fakeClick");i.val(""),t.addClass("hidden"),n.removeClass("hidden")}}),g=t.Model.extend(),m=t.Collection.extend({model:g,url:"order",updateDelay:!1,save:function(e){t.sync("update",this,e)},update:function(e){}}),b=t.View.extend({events:{"click .btn-sort-list":"sort"},initialize:function(e){this.sortables=new m},sort:function(e){var t=this.$el.find(".btn.btn-sort");if(t.hasClass(".btn-danger")){$(".btn-create-list").removeClass("hidden"),$(".btn-csv").removeClass("hidden"),i.each(this.$el.find("li.list"),function(e){var t=$(e).backboneView();$(".handle").addClass("hidden"),$(".actions").removeClass("hidden")});var n=i.map(this.$el.find("li[draggable]"),function(e,t){return{id:$(e).attr("data-id"),_order:t}});this.sortables.set(n),this.sortables.save()}else $(".btn-create-list").addClass("hidden"),$(".btn-csv").addClass("hidden"),i.each(this.$el.find("li.list"),function(e){var t=$(e).backboneView();$(".handle").removeClass("hidden"),$(".actions").addClass("hidden")});t.toggleClass(".btn-danger")}}),w=t.View.extend({initialize:function(e){this.$el.sortable({handle:".handle",items:":not(.head)"}).bind("sortupdate",this.sortupdate.bind(this)),i.extend(this,i.pick(e))},sortupdate:function(e){i.map(this.$el.find("li[draggable]"),function(e,t){$(e).find(".field-order").val(t)})}}),k=t.View.extend({events:{click:"deleteView"},deleteView:function(e){e.preventDefault(),confirm($(e.target).attr("data-alert"))&&(window.location.href=$(e.target).attr("href"))}}),y=t.View.extend({events:{"click > a":"toogle"},initialize:function(){var e=i.some(i.map(this.$el.find("ul li a"),function(e){return $(e).hasClass("selected")}));e&&this.$el.addClass("selected")},toogle:function(e){e.preventDefault(),this.$el.toggleClass("selected")}}),C=t.View.extend({events:{"change select.select-multiple-model":"change"},initialize:function(e){i.extend(this,i.pick(e))},change:function(e){e.preventDefault();var t=e.target,i=t.options[t.selectedIndex].value,n=t.options[t.selectedIndex].text,a=t.getAttribute("limit"),l=this.$el.find(".select-multiple-result"),s=$("<option>").attr("value","").text("-- Escoje un "+n+" --");l.html(s),$.ajax({url:window.app.baseUrl+"admin/"+i.toLowerCase()+"/last?limit="+a,type:"GET",success:function(e){for(var t=0;t<e.length;t++)opt=document.createElement("option"),opt.value=e[t].id,opt.text=e[t].title,l.append(opt)},error:function(e){console.log(e)}})}}),x=t.View.extend({events:{"click li a":"changeTab"},changeTab:function(e){e.preventDefault();var t=$(e.target).attr("href");$(".nav-tabs li").removeClass("active"),$(".tab-pane").removeClass("active"),$("."+t).addClass("active")}}),D=t.View.extend({events:{"click a.btn-instagram":"desvincular"},desvincular:function(e){e.preventDefault(),this.$el.find("input").val(""),this.$el.find("div.logout").remove(),this.$el.find("div.login").attr("style","")}}),S=t.View.extend({events:{"click a.btn-twitter":"desvincular"},desvincular:function(e){e.preventDefault(),this.$el.find("input").val(""),this.$el.find("div.logout").remove(),this.$el.find("div.login").attr("style","")}}),z=t.View.extend({initialize:function(){var e=$('[master="'+this.$el.attr("slave")+'"]'),t=this.$el.attr("slave-option");e.has("select").bind("change",function(i){this.setVisibility(e,t)}.bind(this)),e.has("input").bind("change",function(i){this.setVisibility(e,t)}.bind(this)),this.setVisibility(e,t)},setVisibility:function(e,t){0==e.has("select").length?this.$el.toggle(e.find("input:checked").length==t):this.$el.toggle(e.find("select").val()==t)}}),V=t.View.extend({events:{"click a.fakeClick":"fakeClick","change input.chooseFile":"onFileSelected","click a.btn-delete":"delete","click a.btn-retry":"retry","click a.btn-cancel":"cancel"},initialize:function(){this.uploadcontainer=this.$el.find(".multipart-upload-container"),this.loadmode=this.$el.find(".load-mode"),this.result=this.$el.find(".result"),this.viewmode=this.$el.find(".view-mode"),this.$input=this.$el.find("input.hidden"),this.name=this.$input.attr("value"),this.viewmode.toggleClass("hidden",""===this.$input.val()),this.uploadcontainer.toggleClass("hidden",""!==this.$input.val()),this.config={signerUrl:this.$input.attr("data-signer"),aws_key:this.$input.attr("data-key"),bucket:this.$input.attr("data-bucket")+"/"+this.$input.attr("data-folder"),awsRegion:this.$input.attr("data-region"),awsSignatureVersion:"2"}},onFileSelected:function(e){e.preventDefault();var t=e.target,i=this;if(t.files&&t.files[0]){this.selected_file=t.files[0];var n=this.loadmode.find(".progress-bar"),a=n.find("span");this.uploadcontainer.toggleClass("hidden",!0),this.loadmode.toggleClass("hidden",!1),i.name=(new Date).getTime()+Math.round(1e3*Math.random())+"."+i.selected_file.name.split(".").pop(),Evaporate.create(this.config).then(function(e){i.evaporate=e;var t=e.add({name:i.name,file:i.selected_file,progress:function(e){console.log("making progress: "+e);var t=Math.round(100*e);n.attr("aria-valuenow",t),t+="%",n.css("width",t),0==e&&(t+=" Initializing upload..."),a.text(t)}}).then(function(e){i.loadmode.toggleClass("hidden",!0),i.viewmode.find("input").attr("value",i.name);var t=i.viewmode.find(".btn-download").attr("href"),n=t.split("/").pop();t=t.slice(0,t.length-n.length),t+=i.name,i.viewmode.find(".btn-download").attr("href",t),i.$input.attr("value",i.name),i.viewmode.toggleClass("hidden",!1)},function(e){console.log("All files were not uploaded successfully:",e),i.loadmode.toggleClass("hidden",!0),i.result.find(".upload-fail").text(e),i.result.toggleClass("hidden",!1)})},function(e){console.log("Evaporate failed to initialize: ",e)})}},fakeClick:function(e){e.preventDefault(),this.$el.find("input.chooseFile").click()},delete:function(e){e.preventDefault(),this.uploadcontainer.find("input").val(""),this.uploadcontainer.toggleClass("hidden",!1),this.viewmode.toggleClass("hidden",!0),this.$input.attr("value","")},retry:function(e){e.preventDefault,this.uploadcontainer.find("input").val(""),this.uploadcontainer.toggleClass("hidden",!1),this.result.toggleClass("hidden",!0)},cancel:function(e){e.preventDefault();var t=this;this.evaporate.cancel(this.config.bucket+"/"+t.name).then(function(){console.log("Canceled!")})}});return window.app});