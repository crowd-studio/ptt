{% import 'PttBundle:Default:sprites.html.twig' as sprites %}

{% import _self as sidebar %}
<div class="sidebar">
	<div class="sidebar-inner">
		<div class="menu-container">
			{{ sidebar.menu(info('admin').sidebar, true) }}
		</div>
	</div>	
</div>

{% macro menu(list, principal) %}
	{% import _self as sidebar %}
    <ul{% if principal %} class="menu"{% endif %}>
    	{% for key,info in list %}
    		{% if isAllowed(info) %}
    			{% if info.path is defined %}
					{# li final #}
					<li{% if info.class is defined %} class="{{ info.class }}"{% endif %}>
						<a{% if app.request.uri|slice(app.request.getSchemeAndHttpHost()|length) == path(info.path, info.parameters|default({})) %} class="selected"{% endif %} href="{{ path(info.path, info.parameters|default({})) }}">
						{%- if info.path == 'homes' -%}
							{% import 'PttBundle:Default:sprites.html.twig' as sprites %}
							{{ sprites.link() }}
						{%- endif -%}
							<span>{{info.label|trans}}</span>
						</a>
					</li>
    			{% elseif info.subSections|length > 0 %}
					<li class="subSections {{ info.class|default('') }}">
						<a href="#">{{info.label|trans}}</a>
						{{ sidebar.menu(info.subSections) }}
					</li>
    			{% endif %}
    		{% endif %}
    	{% endfor %}
    </ul>
{% endmacro %}